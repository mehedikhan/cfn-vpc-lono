# Lono CloudFormation

Sample app to create aws VPC Structure. It creates a VPC, with a pair of public and private subnets spread
across two Availability Zones. It deploys an Internet Gateway, with a default
route on the public subnets. It deploys a pair of NAT Gateways (one in each AZ),
and default routes for them in the private subnets. 

## Overview

The CloudFormations templates are generated by a tool called [lono](http://lono.cloud/).


## Prerequisite

You will few things to test this template

1. Aws account or IAM account
2. Setup aws CLI on your local machine
3. Multiple aws profile setup on your local machine
4. How to configure aws profile: https://docs.aws.amazon.com/cli/latest/userguide/cli-configure-profiles.html

```
~/.aws/credentials

[mehedi-khan]
aws_access_key_id=XXXXXXXXXXX
aws_secret_access_key=XXXXXXXXXXX
```

````
~/.aws/config

[profile mehedi-khan]
region=us-east-1
output=text
````

aws profile can also be configured using aws cli:

````
aws configure --profile mehedi-khan
````

## Create Stack

Setup variables if want to customise 

```
./config/params/base/vpc.txt

EnvironmentName=YOUR_DESIRED_VPC_NAME
#VpcCIDR=             # optional

```

To create the stack from the template: 

```
lono cfn create vpc
```

## Import template Stack from online

You can also get started quickly by importing other CloudFormration templates into lono.  For example:

```
lono import https://s3-us-west-2.amazonaws.com/cloudformation-templates-us-west-2/EC2InstanceWithSecurityGroupSample.template --name ec2
```

### Common tasks

Update Stack on cloudformation:
```bash
lono cfn update STACK_NAME --iam --sure
```

If you would like to just generate the templates and not update the CloudFormation stack you can do so with:
```
lono generate
```

Delete Stack
```
lono cfn delete STACK_NAME
```


## More help

You can get help by adding `-h` to the end of commands.

```sh
lono cfn update -h
```

Help is also provided in the [Lono Docs](http://lono.cloud/docs/directory-structure/).
